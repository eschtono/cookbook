%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%     Language Science Press Master File       %%%
%%%         follow the instructions below        %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Everything following a % is ignored
% Some lines start with %. Remove the % to include them

\documentclass[output=inprep,
%  long|short|inprep
%  ,blackandwhite
%  ,smallfont
%  ,draftmode  
		biblatex
		]{LSP/langsci}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0, 0, 0}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.502,0,0.502}{\textbf{#1}}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.651,0.522,0}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{1,0.502,0}{#1}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{1,0,0.502}{\textbf{#1}}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.733,0.475,0.467}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.502,0.502,0.753}{\textbf{#1}}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0,0.502,0.753}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0,0.267,0.4}{#1}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%          additional packages                 %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% put all additional commands you need in the 
% following files. If you do not know what this might 
% mean, you can safely ignore this section
\usepackage{verbatim}
\input{localmetadata.tex}
\input{localpackages.tex}
\input{localhyphenation.tex}
\input{localcommands.tex}
\bibliography{localbibliography}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%             Frontmatter                      %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
\maketitle
\frontmatter
% %% uncomment if you have preface and/or acknowledgements
% \include{chapters/preface}
% \include{chapters/acknowledgments}
% \include{chapters/abbreviations}
\tableofcontents
\mainmatter%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%             knitr settings                   %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Here are settings for knitr, which will be removed in the .tex file
% spacing of code-chunks is set with the "knitrout" environment in localcommands.tex



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%             Chapters                         %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\include{chapters/introduction}
\include{chapters/unicode_background}
\include{chapters/pitfalls}
\include{chapters/ipa_background}
\include{chapters/ipa_meets_unicode}
\include{chapters/orthography_profiles}
\include{chapters/use_cases}


\chapter{Testing code inclusion}


Trying to include code through knitr. 
Different languages can be easily 
included!

There is a bug for non-R engines: the fontsize settings and line spaceing are not correct. I have 
filed an issue, hopefully this will be fixed soon. 

For syntax colouring, install the package `highlight' and for nice tables 
install the package `xtable'.

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{1, 1, 1}\color{fgcolor}\begin{kframe}
\begin{verbatim}
echo 'this is a simple bash example'
ls | wc
## this is a simple bash example
##       10      10     165
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{1, 1, 1}\color{fgcolor}\begin{kframe}
\begin{verbatim}
## note that bash chunks are executed as one, with all output at the end.
## You will have to make different chunks to get output separated.
## And add manual linebreaks!
\end{verbatim}
\end{kframe}
\end{knitrout}

Spacing of lines is fine. I think without background looks better

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{1, 1, 1}\color{fgcolor}\begin{kframe}
\begin{verbatim}
# adding comments inside code? Probably not a good idea
(example <- "this is a simple R example")
## [1] "this is a simple R example"

test <- 3 + 4
test
## [1] 7
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{1, 1, 1}\color{fgcolor}\begin{kframe}
\begin{verbatim}
library(qlcData)
profile <- write.profile("AΑА")
\end{verbatim}
\end{kframe}
\end{knitrout}

% latex table generated in R 3.2.2 by xtable 1.7-4 package
% Fri Nov 13 10:29:19 2015
\begin{table}[H]
\centering
{\small
\begin{tabular}{llll}
  \toprule
Grapheme & Frequency & Codepoint & UnicodeName \\ 
  \midrule
A & 1 & U+0041 & LATIN CAPITAL LETTER A \\ 
  Α & 1 & U+0391 & GREEK CAPITAL LETTER ALPHA \\ 
  А & 1 & U+0410 & CYRILLIC CAPITAL LETTER A \\ 
   \bottomrule
\end{tabular}
}
\caption{test} 
\label{bla}
\end{table}




You can refer to variables by using \textbackslash Sexpr{}. 
For example, the length of the example string is 26.
Crossreferencing also works, see Table~\ref{bla}.

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{1, 1, 1}\color{fgcolor}\begin{kframe}
\begin{verbatim}
print('bla' + 'bla')
print(3+4)
## blabla
## 7
\end{verbatim}
\end{kframe}
\end{knitrout}

You have to add the option ``engine.path='python3'' to get Python 3.

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{1, 1, 1}\color{fgcolor}\begin{kframe}
\begin{verbatim}
print('python3 needs an extra tag')
uni = 'aɽɮz'
print(uni)
## python3 needs an extra tag
## aɽɮz
\end{verbatim}
\end{kframe}
\end{knitrout}

Testing: does referencing to variables also work in Python? It does give an error, so no... !


% TODOS:

% Lots of characters within <> were lost in translation...
% some things to note in the translation to LaTeX:
% tildes in URLs broken -- turned into \textasciitilde{}
% <a> etc. seem to sometimes be lost
% section in some cases should be "chapter"


% other stuff to fix / proof read
% references
% sections, e.g. Section 4, Pitfall 4)
% URLs
% `', ``''
% reinsertion of a lot of the glyphs, etc.
% fix ligatures
% all glyphs need to be checked
% all <>s need to be checked and/or readded

\begin{comment}
===
Double quotation marks are generally used for distancing, in particular in the following situations:

1. when a passage from another work is cited in the text (e.g. According to Takahashi (2009: 33), “quotatives were never used in subordinate clauses in Old Japanese”); but block quotations do not have quotation marks;
2. when a technical term is mentioned that the author does not want to adopt, but wants to mention, e.g. This is sometimes called “pseudo-conservatism”, but I will not use this term here, as it could lead to confusion.

Single quotation marks are used exclusively for linguistic meanings, as in the following: Latin habere ‘have’ is not cognate with Old English hafian ‘have’.

===
so, we should normally use double quotation in most of our cases :-). In general though, I would like us to try and remove double quotations as much as possible. Mostly is thus signals uncertainty on our part :-).

\end{comment}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%                                              %%%
%%%             Backmatter                       %%%
%%%                                              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% There is normally no need to change the backmatter section
\input{backmatter.tex}
\end{document}

% you can create your book by running
% xelatex lsp-skeleton.tex
%
% you can also try a simple 
% make
% on the commandline
